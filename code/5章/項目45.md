# È†ÖÁõÆ45  ÂÆâÂÖ®„Åß„Å™„ÅÑÂûã„Ç¢„Çµ„Éº„Ç∑„Éß„É≥„Çí„ÄÅÈÅ©Âàá„Å´Âûã‰ªò„Åë„Åï„Çå„ÅüÈñ¢Êï∞„ÅÆÂÜÖÈÉ®„Å´Èö†„Åô

## Ë¶ö„Åà„Å¶„Åä„Åè„Åπ„Åç„Åì„Å®

* ÂÆâÂÖ®„Åß„Å™„ÅÑÂûã„Ç¢„Çµ„Éº„Ç∑„Éß„É≥„ÇÑ`any`Âûã„ÅåÂøÖË¶Å„Åß„ÅÇ„Å£„Åü„Çä„ÄÅÂ•ΩÈÉΩÂêà„Åß„ÅÇ„Å£„Åü„Çä„Åô„Çã„Åì„Å®„ÇÇ„ÅÇ„Çã„ÄÇ„Åù„ÅÆ„Çà„ÅÜ„Å™Â†¥Âêà„ÅØ„ÄÅÊ≠£„Åó„ÅÑ„Ç∑„Ç∞„Éç„ÉÅ„É£„ÇíÊåÅ„Å§Èñ¢Êï∞„ÅÆÂÜÖÈÉ®„Å´Èö†„Åô„ÄÇ
* ÂÆüË£Ö„Å´„Åä„Åë„ÇãÂûã„Ç®„É©„Éº„Çí‰øÆÊ≠£„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÈñ¢Êï∞„ÅÆÂûã„Ç∑„Ç∞„Éç„ÉÅ„É£„ÇíÂ¶•Âçî„Åó„Å¶„ÅØ„Å™„Çâ„Å™„ÅÑ„ÄÇ
* „Å™„ÅúÂûã„Ç¢„Çµ„Éº„Ç∑„Éß„É≥„ÅåÊúâÂäπ„Å™„ÅÆ„Åã„Ç≥„É°„É≥„Éà„ÅßË™¨Êòé„Åó„ÄÅ„Ç≥„Éº„Éâ„ÅÆÂæπÂ∫ïÁöÑ„Å™„É¶„Éã„ÉÉ„Éà„ÉÜ„Çπ„Éà„ÇíÊõ∏„Åè„ÄÇ

## „Çµ„É≥„Éó„É´„Ç≥„Éº„Éâ

```ts
interface MountainPeak {
  name: string;
  continent: string;
  elevationMeters: number;
  firstAscentYear: number;
}

async function checkedFetchJSON(url: string): Promise<unknown> {
  const response = await fetch(url);
  if (!response.ok) {
    throw new Error(`Unable to fetch! ${response.statusText}`);
  }
  return response.json();
}

export async function fetchPeak(peakId: string): Promise<MountainPeak> {
  return checkedFetchJSON(`/api/mountain-peaks/${peakId}`);
// ~~~~~ Type 'unknown' is not assignable to type 'MountainPeak'.
//       Âûã 'unknown' „ÇíÂûã 'MountainPeak' „Å´Ââ≤„ÇäÂΩì„Å¶„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgLIHsCu46gAoRwDWyA3gFDLIhwC2EAXMgM5hSgDmA3JcguuFARwTVuxDdeEADYQAbnDDABqCJCjMmITLQBG0HlRjANYAILMk4AJqEoWnfqg8AvuXJxmATxAJkMbAQlAT4ACwgEIggAEwAxNQRQgCkAZQB5ADkACkwoaVE2TgBKJjwodFpgZggAHmwiEHQAdxAAPjJefhBWZCgIZgAHAWrkAF5kOCbcMH8E0Jy8osNkYBhkLIBCPsHhiAA6dCIijqoqMFDypuoIK4BRKHKoLIADAFUaXVlkMHRZsESNsgACSkbZDbr7ViKTDMAAqEAAHmAXM8lrw3FQ+mBciBev1wdU9gArZgCLJotzkRFDKAzTw+PwBXzBXEwOYEYhZAaEIgASWiBXEHBKyDKFSqtQw2DAuBAHKI7QomLUOLCESicTmqUyLwA9HABsBdbQsDhQABabnEZi6kFWvnRFFo3W65AAPw9HuQsK83OQAHJ6o0Wv6VsxqOg6cxmMAOB8vj9vr6UP6pWa5Tz-XtyC7TnnANHqAaDzRAocASQyF1OmmX4TPIQDWDIAnJUAUQyAZX1AGYMgGiGQDKDIALBkA9gyAcwZALIMgD8GQDaDIBkhkAQAzkFxAA)

----

```ts
export async function fetchPeak(peakId: string): Promise<unknown> {
  return checkedFetchJSON(`/api/mountain-peaks/${peakId}`);  // OK
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/KYDwDg9gTgLgBAQwM4E8B2BjOAzArpmASwjR2BgwAsAFYBAawAow76BJAEwC44kYpCaAOYBKHtSgQAtoSTAAPPnpoIAdzQA+OAG8AUHDhRyuKKSrAM9YBwBi5KgCkAygHkAcowAGAegRhC3lIQ+DAIggC0LAxI3gAk2lHsHAC+niIA3Abe3nAuANK6yUA)

----

```ts
const sevenPeaks = [
  'aconcagua', 'denali', 'elbrus', 'everest', 'kilimanjaro', 'vinson', 'wilhelm'
];
async function getPeaksByHeight(): Promise<MountainPeak[]> {
  const peaks = await Promise.all(sevenPeaks.map(fetchPeak));
  return peaks.toSorted(
  // ~~~ Type 'unknown' is not assignable to type 'MountainPeak'.
  //     Âûã 'unknown' „ÇíÂûã 'MountainPeak' „Å´Ââ≤„ÇäÂΩì„Å¶„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ
    (a, b) => b.elevationMeters - a.elevationMeters
    //        ~                   ~ 'b' and 'a' are of type 'unknown'
    //                              'b' „Å® 'a' „ÅØ 'unknown' Âûã„Åß„Åô„ÄÇ
  );
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBBCmA3eYAK8CGBrCMC8MA2gFAwwDkGoYwGA5gK4bkA0FAJihgDYCWrFeNwBGAJwYQB5JPFHxoUrLz4BbDGABWGUSCmJekcFIDuygBZCV5YgF0A3MQwQAnjRgAzBjSi9wMOvBQ6NgQAELOABLwvHRmUAAUAJQAXDCoOiq8CAA8ALIgXlAYBsFYhDYAfDAA3qQw1NAwAA6YOPgwGMbFsOkgmQgAdDzc8QjIaK0QA2pN8e6BwGaliYkOZHJQDKJgzZMDUCAAyiCiUPDs8XUA9FcwAH4PMAAqzi0UXlhgIMZg5DBZMC+sCcEBiYAwwm48BgBxhr2h5HyhWKE2w5AG11uZDIgGj1d5gT7fX4wQBJDHjEQUwEUSq0-oBrBkATkqAKIZAMr6gDMGQDRDIBlBkAFgyAewZAOYMgFkGQB+DIBtBkAyQyAIAY6mR4hg2MJEvgqsIBkIkBgfOBcoFZLgALQddVQxBa3xgXVnUQQWUwG7Yx33J0u13O8jCP7qdgUZgdOQwEDuOFvcgfL4-ayOh1u2Nxsgev4831-Pn4wmRmA4gWATQYZWRVsQAL5AA)

----

```ts
async function getPeaksByDate(): Promise<MountainPeak[]> {
  const peaks = await Promise.all(sevenPeaks.map(fetchPeak)) as MountainPeak[];
  return peaks.toSorted((a, b) => b.firstAscentYear - a.firstAscentYear);
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/IYZwngdgxgBAZgV2gFwJYHsIwOYFNkAKuwA1iAEJgAiwyuAFAJQBcMBATugLaoi4A8AWXRJkwVBCKkA2gF0AfDADeAKBgwomEMhgAHYmRgBeGMADu4nR269cAOmAAbR-T4A3XJIMg7XYLvo4fCgACykSRkZTEBhhUXEvGVkAbjUYdnwEdix9Uh9kdABldHY6ABN6emAAGhgAIyijRTq7OFR2bQBBEChPZABNYnYYAFpTVvaunr7B4HZGVIBfIA)

----

```ts
export async function fetchPeak(peakId: string): Promise<MountainPeak> {
  return checkedFetchJSON(
    `/api/mountain-peaks/${peakId}`,
  ) as Promise<MountainPeak>;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/KYDwDg9gTgLgBAQwM4E8B2BjOAzArpmASwjR2BgwAsAFYBAawAow76BJAEwC44kYpCaAOYBKHtSgQAtoSTAAPAFkI+GAkG0GAPjgBvAFBw4UcriikqwDPWAcAYuSoApAMoB5AHKNDRuAAMAegQwQgCpFTQ1QQBaFgYkAIASXTj2DgBfPwAaHxFEJDgJaVkFZVV1NE16LQBufXSgA)

----

```ts
async function getPeaksByContinent(): Promise<MountainPeak[]> {
  const peaks = await Promise.all(sevenPeaks.map(fetchPeak));  // „Ç¢„Çµ„Éº„Ç∑„Éß„É≥‰∏çË¶ÅÔºÅ
  return peaks.toSorted((a, b) => a.continent.localeCompare(b.continent));
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/IYZwngdgxgBAZgV2gFwJYHsIwOYFNkAKuwA1iAEJgDCmaEuEyAFAJQBcMBATugLaohcAHgCy6JMmCoIRUgG0AugD4YAbwBQMGFEwhkMAA7EyMALwxgAdyn7ufAbgB0wADYumggG4NZZR72ADJjh8KAALXxYWAG4tAHo4mEAihkBWhkAfhkB2hkBzhkBnhkBYOUBAyMBAf80YLnwELiwjUhBHZHQAZXQuZFwAEyYmYAAaGAAjFjMVYEcdRmkGZEcXdChXXBpeA2Bypn6x2knGKOj1AF8gA)

----

```ts
export async function fetchPeak(peakId: string): Promise<MountainPeak> {
  const maybePeak = checkedFetchJSON(`/api/mountain-peaks/${peakId}`);
  if (
    !maybePeak ||
    typeof maybePeak !== 'object' ||
    !('firstAscentYear' in maybePeak)
  ) {
    throw new Error(`Invalid mountain peak: ${JSON.stringify(maybePeak)}`);
  }
  return checkedFetchJSON(
    `/api/mountain-peaks/${peakId}`,
  ) as Promise<MountainPeak>;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/KYDwDg9gTgLgBAQwM4E8B2BjOAzArpmASwjR2BgwAsAFYBAawAow76BJAEwC44kYpCaAOYBKHtSgQAtoSTAAPAFkI+GAkG0GAPjgBvAFBw4GEnzhSEKAEbBN9OAF5jlYBnrAOAMXJUAUgGUAeQA5RgADAHoEMEIIqRU0NUEAWhYGJAiAEl009g4AXzCRAG5DOEJsOEYyowBCC2tbVjgAHxaauBgUFghKhps7OFqHJwByCCsAK1cYUdb2ozrGUexCKD4AQSQMYESATTooOcFzSwHWETKRPQ6YSkkAdzg0YCeAUShJKHC2NAA3BAAG0IHHMCSSpFyPGyARCADo+AJhBUUIx+k0GCJCiUyvkylByLgoKQqK53F4fJRYaEOpForF4qp1GhUqwMtlcpxCgAaK6IJBwCTSWQKZRMjSsLSlfJAA)

----

```ts
export async function fetchPeak(peakId: string): Promise<MountainPeak>;
export async function fetchPeak(peakId: string): Promise<unknown> {
  return checkedFetchJSON(`/api/mountain-peaks/${peakId}`);  // OK
}

const denali = fetchPeak('denali');
//    ^? const denali: Promise<MountainPeak>
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/KYDwDg9gTgLgBAQwM4E8B2BjOAzArpmASwjR2BgwAsAFYBAawAow76BJAEwC44kYpCaAOYBKHtSgQAtoSTAAPAFkI+GAkG0GAPgDcAKFCRYiVJhz4MREmQo1WzVpx58BwsXAnTZC-PTQQAdzQtOABvPTg4KHJcKFIqYAx6YA4AMXIqACkAZQB5ADlGAAMAegQwQhKpFTQ1QQBaFgYkEoASUKb2DgBfIpEdSJKSuFyAaT1uvT0MEj44DmA0BAAbQjgAXhsqTSYAcgWl1d3+vSHIyIA9AH44GbQ5g5XCcUkZOSUaurQdrSA)

----

```ts
function shallowObjectEqual(a: object, b: object): boolean {
  for (const [k, aVal] of Object.entries(a)) {
    if (!(k in b) || aVal !== b[k]) {
      //                      ~~~~ Element implicitly has an 'any' type
      //                           because expression of type 'string'
      //                           can't be used to index type '{}'.
      //                           Âûã 'string' „ÅÆÂºè„Çí‰ΩøÁî®„Åó„Å¶Âûã '{}' „Å´
      //                           „Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„Çí‰ªò„Åë„Çã„Åì„Å®„ÅØ„Åß„Åç„Å™„ÅÑ„Åü„ÇÅ„ÄÅ
      //                           Ë¶ÅÁ¥†„ÅØÊöóÈªôÁöÑ„Å´ 'any' Âûã„Å´„Å™„Çä„Åæ„Åô„ÄÇ
      return false;
    }
  }
  return Object.keys(a).length === Object.keys(b).length;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwBYEMA2m4HcDyARgFYCm0AogI4hYAU6AXInCeVADSKHOtnQBKZoThxMpdEgDeAKESJgcAE6I6EBMiiIA2gGsu6AGpYAui2CIi-KADpSYKEpilkDAQMSz58mBboBCOl1EGCRCDwAfCMQjLER-AF4E7j0TDy9veQB6LMy8-IKAP2LCxApxAFt7LRgKgAdMGAgYKEwAT0QMZBikAHJJNt7EKDa60jk8nILpme9CcnQQZFJEUgAPOqUXZHgkOAsRscRezScwAHNeicyp2bu8iElerXnEJdIAE2G4ELAP9eGoxWvSkAF9ejZrt5bvdYYBo9WOp1Cl0QgDsGQDw+oAkhkA-vKACldAOoMgDMGBEg8GIQDWDFDsrlYbDACUMgGeGQDjDIBhhkA9QyAToZMYANuUAigyAaIZAMoMgAsGQD2DIBzBkAsgyAKwZACIMgH0GQCBDIBABipiBhtNmgEDIwAEvqLAOlmgE28wAhbuTjgMhnDydLAFEMgD8GQCaDIAgBjVWygICUSGAWGWAG4oaCJoH5G6PUgrOwbLpSG1XOgBDZxBcoKhEElkhHoFGY65won7OcU-7QUA)

----

```ts
function shallowObjectEqualBad(a: object, b: any): boolean {
  for (const [k, aVal] of Object.entries(a)) {
    if (!(k in b) || aVal !== b[k]) {  // OK
      return false;
    }
  }
  return Object.keys(a).length === Object.keys(b).length;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwBYEMA2m4HcDyARgFYCm0AogI4hYBC6AJgBToBcicJ5UANIoQ7owATwCUHQnDiZSwxAG8AUIkTA4AJ0TMICZFEQBtANb90ANSwBdTsEREy0AHSkwUDTFLJWYsYpWqiDB2zACEzMZBSIR+AD6xiBZYiKEAvKkCJlZ+CqoA9Hn2ANIBgYgapFAgGkjAWMikANyliAC+Ae2qFVU19tzOxqQi3uhiTrJgAOZQqIjpGQ48ToPDzDHjrtOoza1AA)

----

```ts
shallowObjectEqual({x: 1}, null)
//                         ~~~~ Type 'null' is not assignable to type 'object'.
//                              Âûã 'null' „ÅÆÂºïÊï∞„ÇíÂûã 'object' „ÅÆ„Éë„É©„É°„Éº„Çø„Éº„Å´
//                              Ââ≤„ÇäÂΩì„Å¶„Çã„Åì„Å®„ÅØ„Åß„Åç„Åæ„Åõ„Çì„ÄÇ
shallowObjectEqualBad({x: 1}, null);  // OK„ÄÅÂÆüË°åÊôÇ„Å´„Ç®„É©„Éº„ÇíÊäï„Åí„Çã
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/M4CwhgNhD2DuDyAjAVgUwMYBcCiBHArpABQDeAHgFwAEAjAL4A0VAdvlAJQBQA9N1fwMFDhggH7jRVACoBPAA6oqAclZQlVAJbAW0TFTDBgGgObMwiCIszQqmeYqXQUGTEoB0PPiO8+hgaPVlVQh1QDsGQFR9QAdTQCSGAMdnLFDARYZAS4ZAQ4ZAH4ZAfoZ0wGsGT18Cn0AnJUAohkBlfUAzBkBohkBlBkALBkB7BkBzBkBZBkA-BkBtBkBkhkAgBk5QSBgEeJwCSAAhMAATUkpaRhY2CHYAbn5eKngAaUBABkB87UAZCMAhMxzACoZk9KjAVKNAJQYqoA)

----

```ts
function shallowObjectEqualGood(a: object, b: object): boolean {
  for (const [k, aVal] of Object.entries(a)) {
    if (!(k in b) || aVal !== (b as any)[k]) {
      // `k in b`„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„ÅÑ„Çã„Åü„ÇÅ„ÄÅ`(b as any)[k]`„ÅØOK
      return false;
    }
  }
  return Object.keys(a).length === Object.keys(b).length;
}
```

[üíª TypeScript„Éó„É¨„Ç§„Ç∞„É©„Ç¶„É≥„Éâ](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwBYEMA2m4HcDyARgFYCm0AogI4hYDiccAJgBToBcicJ5UANIkKduZaAEpOhRplLokAbwBQiRMDgAnRCwgJkURAG0A1gPQA1LAF0uwREVFQAdKTBR1MUsjZixiJSpUYWxYAQhYjRBgkQl8AH1jEcyxEEIBeVK1CROREsABPMWNLX38AlQB6csQAAwiowWrAJIZAQYZAcoZAYYZAeoZAdQZAMwZAEQZAaIZAfQZAQIZAQAZqliz0HLkCourAewZ8AGllMsR1UigQdSRgLGRSAG4NlQBfDauVbd39ux5oRyNSPK90MUcZMABzKFQiHSGXsvBeby8MW+Ln+qDOFyAA)
