# é …ç›®46  å‹ãŒä¸æ˜ãªå€¤ã«ã¯ã€`any`ã§ã¯ãªã`unknown`ã‚’ä½¿ã†

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* `unknown`å‹ã¯`any`ã®å‹å®‰å…¨ãªä»£æ›¿æ‰‹æ®µã§ã‚ã‚‹ã€‚å€¤ãŒã‚ã‚‹ã“ã¨ã¯çŸ¥ã£ã¦ã„ã‚‹ãŒã€ãã®å‹ãŒä½•ã‹çŸ¥ã‚‰ãªã„ã€ã¾ãŸã¯æ°—ã«ã—ãªã„å ´åˆã«ä½¿ç”¨ã™ã‚‹ã€‚
* å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã‚„å‹ã®çµã‚Šè¾¼ã¿ã‚’å¼·åˆ¶ã™ã‚‹ãŸã‚ã«`unknown`å‹ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
* æˆ»ã‚Šå€¤å‹ã®ã¿ã«ä½¿ã‚ã‚Œã‚‹å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¯ã€èª¤ã£ãŸå®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚é¿ã‘ã‚‹ã€‚
* `{}`ã‚„`object`ã¨`unknown`ã®é•ã„ã‚’ç†è§£ã™ã‚‹ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
function parseYAML(yaml: string): any {
  // ...
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABABwIYCcDOBTAmgQQFkAZACgE9UBbAGwC5FMp0YwBzASgdTHMQG8AUIkQB6UYgB00wQF8gA)

----

```ts
interface Book {
  name: string;
  author: string;
}
const book: Book = parseYAML(`
  name: Wuthering Heights
  author: Emily BrontÃ«
`);
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgEIHt0GtkG8BQyyIcAthAFzIDOYUoA5gNyHJwCuYAFulFbfRDN8AX3wJ0IWsgBGmLFQzZkAXmQAHOFGoQAmgEEAsgBkAFAANWJclQDqnLtEbIAEhGAMuYaqw7deVACipMAANgCeaFCSYADX+OYAlExAA)

----

```ts
const book = parseYAML(`
  name: Jane Eyre
  author: Charlotte BrontÃ«
`);
console.log(book.title);  // ã‚¨ãƒ©ãƒ¼ãªã—ã€å®Ÿè¡Œæ™‚ã«ã€Œundefinedã€ã‚’ãƒ­ã‚°ã«å‡ºåŠ›ã™ã‚‹
book('read');  // ã‚¨ãƒ©ãƒ¼ãªã—ã€bookã¯é–¢æ•°ã§ãªã„ãŸã‚å®Ÿè¡Œæ™‚ã«ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBARiEBrGBeGAHAhgJwgUwE0BBAWQBkAKAAwCgYYwsBbfALhgCksx8YBRAJ4589GFgCuUABYgcHAMLTcAGxBQofAEI5wUANe1qASgDctUJBAr8AOjUBzSgmS2oASyg2zDAPS+YQAqGQEuGQB+GQCsGQHUGQEAGQHztQBkIwCEzQGsGQBgGCTAAE3wAM3deTMBYBkAkhkBbhkAGhmTAL8VAbKVATQZAaIZaFyRKAHIRLEy2nxh-ILCo6JbAewZAItTAB1NAcwZwwBEGQH0GQECGBJSQ0OLAVKNAJQYGoA)

----

```ts
function safeParseYAML(yaml: string): unknown {
  return parseYAML(yaml);
}
const book = safeParseYAML(`
  name: The Tenant of Wildfell Hall
  author: Anne BrontÃ«
`);
console.log(book.title);
//          ~~~~ 'book' is of type 'unknown'
//               'book' ã¯ 'unknown' å‹ã§ã™ã€‚
book("read");
// ~ 'book' is of type 'unknown'
//   'book' ã¯ 'unknown' å‹ã§ã™ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwIbAKYAVUCdkYCaAggLIAyAFAJ6oC2ANgFwpS4xgDmAlC+ANZg4AdyQBvAFCJEuDFBC4kABzwESFGvQbcA3BIC+EiAmRREAIzhx+iALwp02VUTJUABlMRh6GFgBUACwxEPwxvMDM4YEQAdRgGABNMBgZEAAlUFM9UECgAuFwWYjAwYIAhXAQoAGuJN10jEzgGDAA6BjhOSktrVtgoFoaAeiHpMfHEAD9pycQAch7+OcQYZEQoxChqJWC5gSFROYkRidPxhaslxEB7Bnn9kTBlwGj1QHMGQE0GQCAGCUXKACJZVAJX7DUazC7WZardbRLY7O5gQQPI4naTgq63PYIg6PRCvT5AA)

----

```ts
const book = safeParseYAML(`
  name: Villette
  author: Charlotte BrontÃ«
`) as Book;
console.log(book.title);
//               ~~~~~ Property 'title' does not exist on type 'Book'
//                     ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ 'title' ã¯å‹ 'Book' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
book('read');
// ~ This expression is not callable
//   ã“ã®å¼ã¯å‘¼ã³å‡ºã—å¯èƒ½ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBARiEBrGBeGECGAzApgBUwCcJcBNAQQFkAZACgAMAoGGMTAW1wC4YA1AJYAbIbihRcLGJgCuUABYgivAMLziQkONwwAQkXBQA10wYBKaRD2IkAbiahIIUQDpNAczoJkLqAKiiZvYA9MGs4RGRMAB+sbEw+AYADrhEUACeMADkfgG4WTAAJiC4VmBaMLgAHgLQMOAwGSnZujZZTKFRXd2A6wyAtwyAiwyAYwyAxQzZuaIFgPYMgNHqLW0wgNYMgBragBTqgOoMgH4MgNoMgMkMgEAMTN5IdFlEuJiFWUEdYdEwACrytZVVSecQEAINL+WwwJgRJg4KJbuFAMoMgDsGQDw+lNAD4qgGcGQBfiutAPfKgF+AwDmDFNAEIMgCiGHYHIA)

----

```ts
interface Feature {
  id?: string | number;
  geometry: Geometry;
  properties: unknown;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgGITmArlFBvAKGWWABMB+ALmQGcwpQBzZAH2RCwFsAjaAbiLJGEAPacI9AJ7UA4qPFSBxAA5QRy6GGAQa1LCADWIEQHcQAgL5A)

----

```ts
function isSmallArray(arr: readonly unknown[]): boolean {
  return arr.length < 10;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABDAzgZQLYEMA2OCCAToVgJ4AUWxAXIoQKZYAmCOpi4A1mHAO5gBtALoBKWgCM4cHIyQBvAFCI69KCEJIqhAHQywAcygALRAB5EARgAMAbgUBfIA)

----

```ts
function processValue(value: unknown) {
  if (value instanceof Date) {
    value
    // ^? (parameter) value: Date
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABABwE5wgUwM7YGoCGANiJgBQBuxpAXIuANZhwDuYAlIgN4BQiiMYIkrVMAsNigFImOEIAiBKJk69+-KiUx91Ael2IAegH5hyAqgIBbTMtSdNtRIuU6AvjzdA)

----

```ts
function isBook(value: unknown): value is Book {
  return (
      typeof(value) === 'object' && value !== null &&
      'name' in value && 'author' in value
  );
}
function processValue(value: unknown) {
  if (isBook(value)) {
    value;
    // ^? (parameter) value: Book
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABDAzgITnA1gCgG4CGANiAKYBci4WYcA7mAJSWEmnIqIbaIDeAUIkQAnUlBDCkOQUNlQAngAdScYPmJlGiALy7EAcjgAjAFalo+xADIriVmUQBCPWBBEi1qzNkGwBALakljBI9uw2BgQgUAAWcMLBoRqkMowA3PwAvvygkLAIiIrCcBCkKCgAasnqbJTUtAxaAkIwwIg4qNy4YYxN3nbJGT4A9MOIAHoA-O2KBMIBYqTCWmGUXTLZmUA)

----

```ts
function safeParseYAML<T>(yaml: string): T {
  return parseYAML(yaml);
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAZwIbAKYAVUCdkYCaAggLIAyAPACoB8AFAJ6oC2ANgFwpS4xgDmASi7VEAbwBQiRLgxQQuJAAc8BEhSas2ggNwSAvkA)

----

```ts
declare const foo: Foo;
let barAny = foo as any as Bar;
let barUnk = foo as unknown as Bar;
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYUwxgNghgTiAEYD2A7AzgF3gMyUgXPAGJ4DcAUBCFgEawCCKAnvALw57xRpfNc8AhWBSq1YAVRQBrNhyT94AV2kokAdxQKhMUkA)
