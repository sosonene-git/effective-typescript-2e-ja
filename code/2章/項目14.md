# é …ç›®14  `readonly`ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›´ã«ã¾ã¤ã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é¿ã‘ã‚‹

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* é–¢æ•°ãŒãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å¤‰æ›´ã—ãªã„å ´åˆã¯ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’`readonly`ï¼ˆé…åˆ—ï¼‰ã¾ãŸã¯`Readonly`ï¼ˆã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ï¼‰ã¨å®£è¨€ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€é–¢æ•°ã®å¥‘ç´„ãŒæ˜ç¢ºã«ãªã‚Šã€ãã®å®Ÿè£…ã«ãŠã‘ã‚‹ä¸ç”¨æ„ãªå¤‰æ›´ã‚’é˜²æ­¢ã§ãã‚‹ã€‚
* `readonly`ã¨`Readonly`ã®åŠ¹æœã¯æµ…ãã€`Readonly`ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã®ã¿ä½œç”¨ã—ã€ãƒ¡ã‚½ãƒƒãƒ‰ã«ã¯å½±éŸ¿ã—ãªã„ã“ã¨ã‚’ç†è§£ã™ã‚‹ã€‚
* `readonly`ã‚’ä½¿ã£ã¦ã€å¤‰æ›´ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã¨ã¨ã‚‚ã«ã€ã‚³ãƒ¼ãƒ‰å†…ã§å¤‰æ›´ã®ç™ºç”Ÿã™ã‚‹ç®‡æ‰€ã‚’ç‰¹å®šã™ã‚‹ã€‚
* `const`ã¨`readonly`ã®é•ã„ã‚’ç†è§£ã™ã‚‹ã€‚å‰è€…ã¯å†ä»£å…¥ã‚’é˜²ãã€å¾Œè€…ã¯å¤‰æ›´ã‚’é˜²ãã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
function printTriangles(n: number) {
  const nums = [];
  for (let i = 0; i < n; i++) {
    nums.push(i);
    console.log(arraySum(nums));
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABABwE4zFAKughmAcwBsBTAZwAowAuRMEAWwCMTUBKRAbwChFEIEZKHUZlEAXkQBtALoBuXomBxUiCqWEwJiAAxzEWgDx19MANRmOPPn3oMyAOmQgyACwow2Cm-0FxSDkRwBBS4qKi4AJ4AyoxUomxeigC+3MlAA)

----

```ts
function arraySum(arr: number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
    sum += num;
  }
  return sum;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAQwE6uQTwMogLYAUaqAXImPgEYCmqA2gLoCUiA3gFCKIA21UiAZ3yIAvIgAMAGnL4A3J0QB3ABYxeiAgQp5RKdADoADnEMEmLAIQix4ACbVgMMNVssOXLkJ0BqMdvlcAL4KqHwgqEhe8oFAA)

----

```ts
interface PartlyMutableName {
  readonly first: string;
  last: string;
}

const jackie: PartlyMutableName = { first: 'Jacqueline', last: 'Kennedy' };
jackie.last = 'Onassis';  // OK
jackie.first = 'Jacky';
//     ~~~~~ Cannot assign to 'first' because it is a read-only property.
//           èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚ã‚‹ãŸã‚ã€'first' ã«ä»£å…¥ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgApymANgTwLICuYcARlhAHJwC2KA3gFDLJQRwAmA9iLsjMFADOYAFzJhUUAHMA3E2RY4wsROlyAvgwYJuw5ACtEAa2AQx6TLkLEylGigC8yOnwHLkAcgBSiAI4EILFAIDwAaBSVRTwBpCBAQCHYcD2R1OUMEEwgAOkU9Jw8AeRAlQWBBDxlmAHpq5ELohgys7P4hMGQCn0zkuVrmAYA-YeHkAGE4eM4O0uApEGQwTk824RSSCAQ4AkEUYA7y5DgWNnYAWm5eAAcoTivoMBxshn6Bt4HAWqjAfwZANeVAKIZAEA6gApXQDrDIBbhkAiwyAMYZAMUMgHMGQBCDIBohkA+gyAQIZAIAMHlWYBSgGsGQDHcoBTRUAmgxIwDKDIALBkA9gxwwCyDIA-BkA2gyAZIZAEAMQA)

----

```ts
interface FullyMutableName {
  first: string;
  last: string;
}
type FullyImmutableName = Readonly<FullyMutableName>;
//   ^? type FullyImmutableName = {
//        readonly first: string;
//        readonly last: string;
//      }
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgGIFcA2mCeBZdMOAI0wgDk4BbFAbwChlkZgoBnMALmQ6lAHMA3I2SY4HbrwHCAvvTA4ADigzYcASSpVCJMpRrIAvMgBKEOABMA9iFwAeVbgJFSFahAB8wgPTemyAD0AfmQFZTQsXE1tFz13I2QGX38U5Chza1scZlYJHjA+ECF6ZNSmdMsbXFFxLnzC4tKUmSA)

----

```ts
interface Outer {
  inner: {
    x: number;
  }
}
const obj: Readonly<Outer> = { inner: { x: 0 }};
obj.inner = { x: 1 };
//  ~~~~~ Cannot assign to 'inner' because it is a read-only property
//        èª­ã¿å–ã‚Šå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã‚ã‚‹ãŸã‚ã€'inner' ã«ä»£å…¥ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
obj.inner.x = 1;  // OK
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgPIFdJWQbwFDLKgjQBcuBhyAHuSOgLYBG0A3JQL55cID2IAZzDJeTAFbkAShDgATfgBsAngB4MWAHzIAvLiIgSUcjhrkADMg4d2osQDpi0HXtrIAjJfYB6L4QB+AQHIAMJwBrzCcAICwADmIMhgvMgA5I5QKcgsCHDoAijAwsACyHDIUDKyALSKSsgADlC89dBgSng+VF3IgLVRgP4MgGvKgFEMgEA6gBSugOsMgLcMgIsMgGMMgMUMgOYMgEIMgNEMgPoMgIEMgIAMaQbQmYDWDIDHcoCmioCaDGuAygyAFgyA9gxLgLIMgH4MgNoMgMkMgEAMeLYOB1A7NRnG5WIROqgANJAA)

----

```ts
type T = Readonly<Outer>;
//   ^? type T = {
//        readonly inner: {
//          x: number;
//        };
//      }
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAKlC8UBKECGATA9gOwDYgB4B5AV2AgCcA+AbgCgB6BqFgPQH4pRJYEoBvRsxYiWFNFjwgoAS2zZKALgFDRaqAA9l2EgFsARpXpN1LAL7Hhos0A)

----

```ts
const date: Readonly<Date> = new Date();
date.setFullYear(2037);  // OKã§ã™ãŒã€dateã®å€¤ã‚’å¤‰æ›´ã—ã¦ã—ã¾ã„ã¾ã™ï¼
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBAJgQygUwFwwErIXcAbATwB4ARJZAPhgF4YxkB3GMlACgEoBuAKERQDoIyKADEArnjwBNbACdWAJgAMAZgDsXGDAD02mAHkA0oHMGQJoMgGQZAgAx9kgOwZAJAqAkhkCQmoBezQOoMgMwZ3gPwZAIgw+poCA-0A)

----

```ts
interface Array<T> {
  length: number;
  // ï¼ˆå¤‰æ›´ã‚’å¼•ãèµ·ã“ã•ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤ï¼‰
  toString(): string;
  join(separator?: string): string;
  // ...
  // ï¼ˆå¤‰æ›´ã‚’å¼•ãèµ·ã“ã™ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤ï¼‰
  pop(): T | undefined;
  shift(): T | undefined;
  // ...
  [n: number]: T;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgIJSnAngHgCoB8yA3gFDLIA2EIA5mABYBcyIArgLYBG0A3OcgD0g5IAh-wJCagF7NASQyBUfUCyDIHdYwMoMgVQZAVgyARBkCHDIF6GQMMMgSYZAJf6BIf4FgA9gGUwUULQAUAShYBnOw-4UAVpdCObhAADnCYVlAA-O6edK7IHvZ03kIiAHQZAsJiUnJKyoCaDHpGZgLBlsEuLHjIAD7IbCAAJhAwoBBNKW4MwDBgVcg19Y0tbSAdKdkZaQIA2iAs7NzQALrV-AC+QA)

----

```ts
interface ReadonlyArray<T> {
  readonly length: number;
  // (å¤‰æ›´ã‚’å¼•ãèµ·ã“ã•ãªã„ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤)
  toString(): string;
  join(separator?: string): string;
  // ...
  readonly [n: number]: T;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgEoTgEwPYgDYCeAglFHAQDwAqAfMgN4BQyyUGO+ByeEIA5mAAWALmQgArgFsARtADczZAHolyABSBITUAvZoCSGQKj6gWQZA7rGBlBkCqDICsGQCIMgQ4ZAvQyBhhkCTDIBL-AJSKw2AMpgooPjU3UQBnPwCFFgArbFA1EIgABzgyLygAflDw-mDkMP9+SOVVADoyxTYsXEJkAG0QUQkZaABdUSoFAF8gA)

----

```ts
const a: number[] = [1, 2, 3];
const b: readonly number[] = a;
const c: number[] = b;
//    ~ Type 'readonly number[]' is 'readonly' and cannot be
//      assigned to the mutable type 'number[]'
//      å‹ 'readonly number[]' ã¯ 'readonly' ã§ã‚ã‚‹ãŸã‚ã€
//      å¤‰æ›´å¯èƒ½ãªå‹ 'number[]' ã«ä»£å…¥ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBAhgLhmArgWwEYFMBOBtAXRgF4Y8BGAGhgCZqBmAgbgChRJYMkcs4ATcABsAnsnTZ8RUnFbtoMYElSZchEjAysA9Fph6YAPxgAVYQAcsMAOQ9+Q0comErMAJYRrtgWBEu4YPgV-MBBOLBYdfX04CAhXAHMwLECoEBgoAAtLNBQoOAxBSyhzSytHVQIrCN0omEBo9U9ebxExFUkXQHsGRrsfYRdAcwZAIQZAaIZAfQZAQIZAQAZq2phASE1AF7NAe+VAX4DAKwYGsvEKl0BrBkBjuUBTRUBNBmHAZQZACwYO-sBZBkA-BkBtBkBkhkAgBiA)

----

```ts
function printTriangles(n: number) {
  const nums = [];
  for (let i = 0; i < n; i++) {
    nums.push(i);
    console.log(arraySum(nums as readonly number[]));
    //                   ~~~~~~~~~~~~~~~~~~~~~~~~~
    // The type 'readonly number[]' is 'readonly' and cannot be
    // assigned to the mutable type 'number[]'.
    // å‹ 'readonly number[]' ã¯ 'readonly' ã§ã‚ã‚‹ãŸã‚ã€
    // å¤‰æ›´å¯èƒ½ãªå‹ 'number[]' ã«ä»£å…¥ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABABwE4zFAKughmAcwBsBTAZwAowAuRMEAWwCMTUBKRAbwChFEIEZKHUZlEAXkQBtALoBuXomBxUiCqWEwJiAAxzEWgDx19MANRmOPPn3oMyAOmQgyACwow2Cm-0FxSDkRwBBS4qKi4AJ4AyoxUooi4YqgkuAAmCESRIsyssmxeinwA9MU+5RU+AH41tXX1DXVFiKWIWK4kiFCRyJ0A5Cnpmdl2LKiyfQZiA6kZYFmT+Gn8+GBwwizNrUlkMARgJMtQcF0diAwgULhMpF09-aN5Mn0OW2WA0eqIM0PzI4xjE0QgHsGL6DOYLRCAcwZAEIMgGiGQD6DIBAhkAgAxvRCASE1AC9mgHvlQC-AYArBk+fUe42eiEA1gyAY7lAKaKgE0GWGAZQZABYMQMhgFkGQB+DIBtBkAyQyAIAZFABfbiCoA)

----

```ts
function arraySum(arr: readonly number[]) {
  let sum = 0, num;
  while ((num = arr.pop()) !== undefined) {
    //              ~~~ 'pop' does not exist on type 'readonly number[]'
    //                  ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ 'pop' ã¯å‹ 'readonly number[]' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
    sum += num;
  }
  return sum;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAQwE6uQTwMogLYAUaqAXIqgKbIAmCANpomPgEYWoDaAugJSIDeAKESI6FKIgDO+RAF5EABgA0TfAG5hiAO4ALGGMQECzPHJToAdAAc4Vgjz4BCWfPDUKwGGArU+QkSIA9IEBoWEiAH5RiADkNlYxiLQUkkxwEhQAHjCSEgiIUJhWFLGUNPSMJmycXDGaQSHhTaGA6wyAtwyAiwyAYwyAxQyx8YmA9gyA0eqlVLRgDKp41dyJgNYMgBragBTqgOoMgH4MgNoMgMkMgEAM9VIyANTyJhoiAL6alFAgqEjSeBoXQA)

----

```ts
function arraySum(arr: readonly number[]) {
  let sum = 0;
  for (const num of arr) {
    sum += num;
  }
  return sum;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAQwE6uQTwMogLYAUaqAXIqgKbIAmCANpomPgEYWoDaAugJSIDeAKESI6FKIgDO+RAF5EABgDcwxMDipEBCAkkTmeRHGAp0fISJHTDAankGVIgL6rKUEKiTWVToA)
