# é …ç›®33  `null`å€¤ã‚’å‹ã®å¤–å´ã«æŠ¼ã—ã‚„ã‚‹

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* ã‚ã‚‹å€¤ãŒ`null`ã¾ãŸã¯`null`ã§ãªã„ã“ã¨ãŒã€åˆ¥ã®å€¤ãŒ`null`ã¾ãŸã¯`null`ã§ãªã„ã“ã¨ã¨æš—é»™çš„ã«é–¢é€£ã™ã‚‹ã‚ˆã†ãªè¨­è¨ˆã‚’é¿ã‘ã‚‹ã€‚
* `null`å€¤ã‚’APIã®å¤–å´ã«æŠ¼ã—ã‚„ã‚Šã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå®Œå…¨ã«`null`ã¾ãŸã¯é`null`ã«ãªã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€äººé–“ã«ã¨ã£ã¦ã‚‚ã€å‹ãƒã‚§ãƒƒã‚«ãƒ¼ã«ã¨ã£ã¦ã‚‚ã€ã‚³ãƒ¼ãƒ‰ãŒæ˜ç¢ºã«ãªã‚‹ã€‚
* å®Œå…¨ã«é`null`ãªã‚¯ãƒ©ã‚¹ã‚’ä½œã‚Šã€ã™ã¹ã¦ã®å€¤ãŒåˆ©ç”¨å¯èƒ½ã«ãªã£ã¦ã‹ã‚‰ãã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ã‚’æ¤œè¨ã™ã‚‹ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
// @strictNullChecks: false
function extent(nums: Iterable<number>) {
  let min, max;
  for (const num of nums) {
    if (!min) {
      min = num;
      max = num;
    } else {
      min = Math.min(min, num);
      max = Math.max(max, num);
    }
  }
  return [min, max];
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/PTAEAEGcBcCcEsDG0ByBXANhgwgCwKaIDWkAXKAGYCGGk+AUBWgHbLwD2zo+AHtPs2gAKZmgC2ZUAEl+sKgCMM+ADyix8-LAB8ASlABveqFBLooMfGYAac1R4BuI5XaxQQxJxig1odhW-ikHqGxsbw-kIAhBbMwU6h5pagALwBYo4JxmJ2KWkZoQC+3LT4BvGhMbkAslTQuAB0MUIxNmo6+QnZPNW1DV3Ndq3i7eUFTmPGsPjQaLBcANottjwAuo4FQA)

----

```ts
function extent(nums: Iterable<number>) {
  let min, max;
  for (const num of nums) {
    if (!min) {
      min = num;
      max = num;
    } else {
      min = Math.min(min, num);
      max = Math.max(max, num);
      //             ~~~ Argument of type 'number | undefined' is not
      //                 assignable to parameter of type 'number'
      //                 å‹ 'number | undefined' ã®å¼•æ•°ã‚’å‹ 'number' ã®
      //                 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“
    }
  }
  return [min, max];
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAUwB5WWKAKMIC2AzgFyICSGATgIYBGANsgDx763KUB8AlIgN4AoRIkZRE+GGAA046qgDcQxMDiVE2CAkJjWiOMEStCvQcOEwD2AIQSwJpWfGTEAXkMFFj4fjmv3+TzMAXxR6QmR+BzNbPwBZaigACwA6W2xbGVZuQMcfVDiElLz0uUyCbKjhAHoqrzrhAD8mxABBSgBzAkwxfUQoAE8ABwiAclZ2NQAfRHAAE2RgSWRZkcQYQkM4KErEGvr94WpCQhh2sDpGPrhEQeoafGQqPQMB4cQxggmRnb2D+sBo9Xe4w4iGmcwWSxWiEAdgyAVH1AA6mgCSGQEfNgcVbQn61P51QCLDIBLhkAhwyAH4ZAP0MxMA1gyAJyVAFEMgGV9QBmDIBohkAygyACwZAPYMgHMGQCyDIA-BkA2gyAZIYokElGLhJRHiBKEgANoZWSoAC6iiCQA)

----

```ts
const [min, max] = extent([0, 1, 2]);
const span = max - min;
//           ~~~   ~~~ Object is possibly 'undefined'
//                     ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ 'undefined' ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBA2gWwJZgDQwQQwB4F0YC8MAptlMWFABRwAM6AjOgEy4CUA3AFCiSwQAHTGEIYcMALQYU3APSyYipcpgA-dUvWqYAeQBGAK2LBYSCDAEgIEJHoA2ATxgByAK5gAJsQBmKYh+cueRUQ0KVAKoZANYZADoZAcoZAeoZACYZAewYXdy9fMH9nGEA7BkB75UBfgMByA0AZBkAhBkAohkA-BkBNBkAgBiA)

----

```ts
function extent(nums: Iterable<number>) {
  let minMax: [number, number] | null = null;
  for (const num of nums) {
    if (!minMax) {
      minMax = [num, num];
    } else {
      const [oldMin, oldMax] = minMax;
      minMax = [Math.min(num, oldMin), Math.max(num, oldMax)];
    }
  }
  return minMax;
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAUwB5WWKAKMIC2AzgFyICSGATgIYBGANsgDx763KUB8AlIgN4AoRIkZRE+GGACy1VKQDardpQA0iJRwC6iAD7qQ9eogC8+wwG4hiYHEqJsEBITGtEcYPqK9Bw4TA-YAIQS0rLeVr7ikjKoJoiKBGqsmpaRAL4o9ITI-BG+jmDO8XD0ACZSkmol5bLapiExqZFRobGm8jJQABYAdCG4iW5lFWDcap29+LID+FXDYSl5aVbLwpTIUCCUSA2ylmlAA)

----

```ts
const [min, max] = extent([0, 1, 2])!;
const span = max - min;  // OK
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBA2gWwJZgDQwQQwB4F0YC8MAptlMWFABRwAM6AjOgEy4CUAhANwBQoksCAAdMYQhhwwAtBhRcYMAPSKYAeQDSQA)

----

```ts
const range = extent([0, 1, 2]);
if (range) {
  const [min, max] = range;
  const span = max - min;  // OK
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBATgQzAcwKYwLw1QDyqsKACgG0AGAGhgEYqAmAXQEoBuAKAEsAzGIxFVExgBvNjBihIsEgFsOYKjIQ4GmeEjTtxk6DAgAHJGqU4YAWhhywLcQHpbMAPIBpNgF8gA)

----

```ts
class UserPosts {
  user: UserInfo | null;
  posts: Post[] | null;

  constructor() {
    this.user = null;
    this.posts = null;
  }

  async init(userId: string) {
    return Promise.all([
      async () => this.user = await fetchUser(userId),
      async () => this.posts = await fetchPostsForUser(userId)
    ]);
  }

  getUserName() {
    // ...?
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYGwhgzhAECqEFMBOAFA9hALjA3gKGmgFdEkAuOUgSQDsAzNaAH2hqJBAG4DoAHDbBXRYA2gF1mrdlzw9gaGliRFgmNEgAUASmj5ChTAAsAlhAB0JZNAC8Ujt33Qjps-ywxbbezwC+swpAAnjTA0MY0xpgalkhUACYUSuEA5jp6+kgImERINNAoSGgAtqYIZmAcGiI8jkEh0No2AHxOJuYxNtBgAO5gkdB0WcCG8MjR1HFaADQ1+nWhjdYtzuZu2J09fZgDQ4bC2ABi6qOaMfFas2JaDtB+PMlZJwByYEUIjemEAPRf0Gb-AH5fHgfEA)

----

```ts
class UserPosts {
  user: UserInfo;
  posts: Post[];

  constructor(user: UserInfo, posts: Post[]) {
    this.user = user;
    this.posts = posts;
  }

  static async init(userId: string): Promise<UserPosts> {
    const [user, posts] = await Promise.all([
      fetchUser(userId),
      fetchPostsForUser(userId)
    ]);
    return new UserPosts(user, posts);
  }

  getUserName() {
    return this.user.name;
  }
}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYGwhgzhAECqEFMBOAFA9hALjA3gKGmgFdEkAuOUgSQDsAzNAbgOgAcNsL0sBtAXWYtgaGliRFgmNEgAUJZBXjJaDADRsOELh34BKaPkKFMACwCWEAHTyk0ALzFSzI9FMXL7LDAefsz6AC+eCxYYJhmwNCQAJ40kWY0Zphy1AAmFGIJAOa6XEhoALYWCAA8SqiaAHwGLITCopjQPDbqvhB89lEA7mBJ0Cj5RYiWYCAgMjy1RnQImMAm5SnKqbqqU4Qzcybc2ABi0os2VCtTfLr+hEizREg00DQIXZTIOxBLSK2a5yxBLFmz5QAcmACggZPpDEYrpgbnc3FYbJYaCCEP4ggEgA)
