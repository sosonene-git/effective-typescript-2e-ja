# é …ç›®42  ãŸã¾ãŸã¾ç›®ã«ã—ãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåž‹ã‚’é¿ã‘ã‚‹

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* ãŸã¾ãŸã¾ç›®ã«ã—ãŸãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ã„ã¦ã€è‡ªã‚‰åž‹ã‚’æ›¸ãã“ã¨ã‚’é¿ã‘ã‚‹ã€‚ã‚¹ã‚­ãƒ¼ãƒžã‚’èª¤è§£ã—ãŸã‚Šã€`null`ã®å¯èƒ½æ€§ã‚’é–“é•ãˆãŸã‚Šã™ã‚‹ã“ã¨ãªãåž‹ã‚’æ›¸ãã®ã¯é›£ã—ã„ã€‚
* å…¬å¼ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ãŒæä¾›ã™ã‚‹åž‹ã‚’ä½¿ã†ã€‚ãã®ã‚ˆã†ãªåž‹ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€ã‚¹ã‚­ãƒ¼ãƒžã‹ã‚‰åž‹ã‚’ç”Ÿæˆã™ã‚‹ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
function calculateBoundingBox(f: GeoJSONFeature): BoundingBox | null {
  let box: BoundingBox | null = null;

  const helper = (coords: any[]) => {
    // ...
  };

  const {geometry} = f;
  if (geometry) {
    helper(geometry.coordinates);
  }

  return box;
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABBAhgGwiNKoFMBCc4AJjGAOaEAeAFMAFyIDiucAUgMoDyAcgGK4cIAE64AlI0IkylOFUQAfRGCxpEAbwBQiRGlxREAIzmSiYUhWqLlqxAF4baNAG5N25AgDOBgBa40AA64wvaINBBwcMLEnowoYACeANoAumL2AHwa7joA9LmIAHTF7gC+ru4RYN4a5KwAtvrCCaWhwK46MMBhdXCNUM3pWjo6foHBNL39zYURURY4uJ5iHYilbjqiUCJIxlSupUA)

----

```ts
interface GeoJSONFeature {
  type: 'Feature';
  geometry: GeoJSONGeometry | null;
  properties: unknown;
}
interface GeoJSONGeometry {
  type: 'Point' | 'LineString' | 'Polygon' | 'MultiPolygon';
  coordinates: number[] | number[][] | number[][][] | number[][][][];
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgOIQPYCkDKB5AOQDEI4wBXKFAbwChlkwBPABwgC5kByEsyiLgG56yAOaYAthDBQmndNnwEFUmU2QAfZCHIAbXcIYsoGNlDDAIAZ07kQAaxAYA7iGEBfWqEixEKBbiEKtKyyHQMzGycXAAKGN5cmtwAMqAQODKgoolasRi6TKIYIDncALJ6FnEFRSWGyAgYGFAAJqBk1pw6EgBG0ADaALpJ3X1QQ0Mj5L0DgxPDWqOz80MeQA)

----

```ts
import {Feature} from 'geojson';

function calculateBoundingBox(f: Feature): BoundingBox | null {
  let box: BoundingBox | null = null;

  const helper = (coords: any[]) => {
    // ...
  };

  const {geometry} = f;
  if (geometry) {
    helper(geometry.coordinates);
    //              ~~~~~~~~~~~
    //   Property 'coordinates' does not exist on type 'Geometry'
    //   ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ 'coordinates' ã¯åž‹ 'Geometry' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
    //     Property 'coordinates' does not exist on type 'GeometryCollection'
    //     ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ 'coordinates' ã¯åž‹ 'GeometryCollection' ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
  }

  return box;
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYWwDg9gTgLgBAbwGIFMCGMCuUUF84BmUEIcA5AOYoQBWAzhAHZkDcAUGwZowMYzBM4PNABsemERhQAhCNwAmwRhVkAPABQEAXHFQZsKAJQ7ZCpSoiq4AHziMJIxGzhwRKeACNLJuY0XK1GzsHOABeYJERdmchJjp4AAsUETAUKDC4dR4IaHk6HTRGAE8AbQBdQzCAPicXFwB6ergAOlaY3GiXbMZ4xCoSdygi-HCCdhdgAkz+kEGiyoQYlySUtPUZuebs3KUpOkNxusa6k9OXAD9Lq+vzpbhjlwAFYlTYIvJtqH89sjh5CBQdDsEHgKFUwF6ghgRVS5AA4tRZjAhmQ7g84IB1hkAtwyARYZAGMMgGKGD45L67GCA36AewZANHq8MRc1+gGsGQAa2oAKdUA6gyAPwZANoMgGSGQBADGimidnhBXtDiTtGD8-gCgYwQXAwRD4FCYSg6QNkUUAMIQSIoPgCZhC07Y-FEsifb7kuhU2lkBFaoZ6g1GphMtlcvmCly4DguHBYKCMOBeVTsXBAA)

----

```ts
const {geometry} = f;
if (geometry) {
  if (geometry.type === 'GeometryCollection') {
    throw new Error('GeometryCollections are not supported.');
  }
  helper(geometry.coordinates);  // OK
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBA3gcwKYgLZKgJwJ4F8YC8MAZgNwBQAlsTABTJoY4CU85MM1dD6W2AdFGwAHJIQJEA5AHEUvHAGEQAG2VJgUSuEms47DjCgALTCADuMMEgsBRTKcy0ZcptiWr1m8BBgBDTGJgILAQAK7CwiCYUEgAJvw6FBy4+kZIyqKOPK78oFGxlGC+MRDMpBwA9BUwAPIA0uS4QA)

----

```ts
const geometryHelper = (g: Geometry) => {
  if (g.type === 'GeometryCollection') {
    g.geometries.forEach(geometryHelper);
  } else {
    helper(g.coordinates);  // OK
  }
}

const {geometry} = f;
if (geometry) {
  geometryHelper(geometry);
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBA5gUxAWwVATgTwBIIDYAOC6MAvDABRwBcMA4kqhpgJRkB8MA3gFAwwBLAGaU4AOiiYiZUuQDkDFGiwBhEHjwJgUAeDlte-fuMRKMAhBDFCQ6AKIBDYAAsqjZTnxF0LANx8YAF8YfAgEbgD+Zy9iKjFQWwATATAHKEs-fgB6LJgAeQBpAMCeEp5QSFguUyYsYPIhf2FRd2YDAJqPXEJYzrb-QKA)
