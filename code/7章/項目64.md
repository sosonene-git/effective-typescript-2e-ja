# é …ç›®64  åå‰çš„åž‹ä»˜ã‘ã®ãŸã‚ã«ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä½¿ã†ã“ã¨ã‚’æ¤œè¨Žã™ã‚‹

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* åå‰çš„åž‹ä»˜ã‘ã§ã¯ã€ã‚ã‚‹åž‹ã‚’å€¤ãŒæŒã¤ã®ã¯ã€ãã®å€¤ãŒãã®åž‹ã‚’æŒã¤ã¨å®£è¨€ã•ã‚ŒãŸã‹ã‚‰ã§ã‚ã£ã¦ã€ãã®åž‹ã¨åŒã˜å½¢çŠ¶ã‚’ã—ã¦ã„ã‚‹ã‹ã‚‰ã§ã¯ãªã„ã€‚
* æ„å‘³çš„ã«ã¯ç•°ãªã‚‹ãŒæ§‹é€ çš„ã«ã¯ä¸€è‡´ã™ã‚‹ãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–åž‹ã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåž‹ã‚’åŒºåˆ¥ã™ã‚‹ãŸã‚ã«ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚’æ¤œè¨Žã™ã‚‹ã€‚
* ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåž‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€æ–‡å­—åˆ—ã®`enum`ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€`unique symbol`ãªã©ã€ãƒ–ãƒ©ãƒ³ãƒ‰ã‚’ä»˜ã‘ã‚‹ã®ã«ä½¿ã‚ã‚Œã‚‹ã•ã¾ã–ã¾ãªãƒ†ã‚¯ãƒ‹ãƒƒã‚¯ã‚’çŸ¥ã‚‹ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
interface Vector2D {
  x: number;
  y: number;
}
function calculateLength(p: Vector2D) {
  return Math.sqrt(p.x ** 2 + p.y ** 2);
}

calculateLength({x: 3, y: 4});  // OKã€çµæžœã¯5
const vec3D = {x: 3, y: 4, z: 1};
calculateLength(vec3D);  // OKï¼çµæžœã¯ã‚„ã¯ã‚Š5
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgGoQWA9lATAEWQG8AoZZADwC5kQBXAWwCNoBuM5ATxvubZIC+JGHRCZgWEMgRwANgjqy4kADIQQAczAALABQAHGukw4CASmIcoEMHShSAssu0A6AM4BHKGAMuKyACoA5FxkAGpkfRdOQODcM3YhEhl5RWUINU0dXSJqZABmABouGgAWAQTyAHoq5AB5AGlAQAZABV9AHPNAewYAVmTJNzBkADcMfMIAXmI8opLkUuKALxoARgF2FIUlVXUtPWGEUcrkGvqGwEB-9o7AEIYOwCiGLqA)

----

```ts
interface Vector2D {
  type: '2d';
  x: number;
  y: number;
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgGoQWA9lATAEWQG8AoZZMATwAcIAuZAclwBNGBuM5ADwZAFcAtgCNoncpT5DRUTgF8gA)

----

```ts
type AbsolutePath = string & {_brand: 'abs'};
function listAbsolutePath(path: AbsolutePath) {
  // ...
}
function isAbsolutePath(path: string): path is AbsolutePath {
  return path.startsWith('/');
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAggRgZwPYBsCuwIAUCGwAWUAvFAsAE4CWAdgOZQBkUA3gPpzk7UAmAXFAHIciAQF8A3ACgAZmmoBjYJSTUoKSmXjJ0mXAQAUYPPn5bUGbMYCULSVCgB6B1AB0byaJlzFy1RrM6lgZGBPxkVHRW-CGEGrCI5rrGtvbkEMBo5KoxLmQ45MAIAOqUBgIOAlZSokA)

----

```ts
function f(path: string) {
  if (isAbsolutePath(path)) {
    listAbsolutePath(path);
  }
  listAbsolutePath(path);
  //               ~~~~ Argument of type 'string' is not assignable to
  //                    parameter of type 'AbsolutePath'
  //                    åž‹ 'string' ã®å¼•æ•°ã‚’åž‹ 'AbsolutePath' ã®
  //                    ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABMAFABwIZQBYC5EDOUATjGAOYCUiA3gFCKIzCIowECCARgXADYgoAUwAKWbOnGVq9Roz7so3XgOFicknJQDcDRAF89Cosv6DR4zdh16A9LbmOncgH5uXiDsXIgAtkLAoRDgWKABPNCFEAHIiUgpopgJEMDggjAICGHIwDC4+KKg4OwdnMudMYgx-YWJg0Iio6NNVCxxokvKuuUBo9Ri4snJEwDsGQFR9QAdTQCSGPuaeMzVxEc7ursBFhkBLhkBDhkAfhkB+hm3AawZAJyVAKIZAZX1AMwZAaIZAZQZACwZAewZAcwZAWQZAPwZAbQZAZIZAIAY6fSAA)

----

```ts
type Meters = number & {_brand: 'meters'};
type Seconds = number & {_brand: 'seconds'};

const meters = (m: number) => m as Meters;
const seconds = (s: number) => s as Seconds;

const oneKm = meters(1000);
//    ^? const oneKm: Meters
const oneMin = seconds(60);
//    ^? const oneMin: Seconds
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAshwQE4GcoF4oDsCuBbARklAGRQDeA+vogIaYAmAXFAOS7xLIsC+A3AFChIUAMoQAxgHsGqDDgJFSlanSatkE6fS59+-KZmTAo7BCnRQAFLmbzCiAJToAfCag1UcM8gEGjUDQNtC0tkWzx7JzRXVA9RTRkBfWl-aQgAaVwLU05LAEYABiKHAQB6UqhKqAA9AH4oP2M0zOYvTmTDJswIGABLTAtArWRLADYCkv5yqpr6xqg0vsxmMSDkIA)

----

```ts
const tenKm = oneKm * 10;
//    ^? const tenKm: number
const v = oneKm / oneMin;
//    ^? const v: number
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBFCmYDSBbGBeG56pgKhgEYAGAbgCgB6SmWmAPQH4ZRJYFkUAuGMAVxQAjeACdyraDABuGLGBxoa2ALIBLMBWp0GzCbCk9+Q0UA)

----

```ts
declare const brand: unique symbol;
export type Meters = number & {[brand]: 'meters'};
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/CYUwxgNghgTiAEYD2A7AzgF3gIxlFwAXPAK4oCWAjiQmgJ4C22SEA3AFAgAeADkjFgx0eCALIgMIGGngBeeChJMp8AGTwA3gG1c+YAF1iAcgYSpaIwF9WQA)

----

```ts
function binarySearch<T>(xs: T[], x: T): boolean {
  let low = 0, high = xs.length - 1;
  while (high >= low) {
    const mid = low + Math.floor((high - low) / 2);
    const v = xs[mid];
    if (v === x) return true;
    [low, high] = x > v ? [mid + 1, high] : [low, mid - 1];
  }
  return false;
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABAIxmAhgJwJ4GUCmWEAFgDwAqAfABQAeAzgFyLkDaAugDSK3PkCUzZHDgAbQkgDeAKESJxUeXADuiALyIADN2IwA5sXU96AOnFg9UQwFpEARgDcsxMt3jE1XQcSUNolfyIMnJyEAj0igC2MAAmRv6qANSIALLoVibA-nCY1J76NkrKgQD0iABM-E4hiGFgEYgAbkYMrNEx7NUhMMAezWoDPIGY+FAgmEhQmCD4XXKsCToF7C0+TYgA-IhtsYjJdksGK8wLKtztiLZ2nc4Avs4jYxOIwOii9LPSt0A)

----

```ts
type SortedList<T> = T[] & {_brand: 'sorted'};

function isSorted<T>(xs: T[]): xs is SortedList<T> {
  for (let i = 0; i < xs.length - 1; i++) {
    if (xs[i] > xs[i + 1]) {
      return false;
    }
  }
  return true;
}

function binarySearch<T>(xs: SortedList<T>, x: T): boolean {
  // ...
}
```

[ðŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAyg9gJ2BAJgGQJYGdgB4AqAfFALxT4DaAulAGRQDeA+gEYICGAdigFxQDkWRMhT8AvgG4AUFIBmAV04BjYBjico2eElQFCACgAeWPpSoBKPsc1ZYw1Jhx7GUqFFmIo+gDYRgm0igABgkA3ChjADpfTgBzYAALKABaKABGUIwAaizzFzc3DFkvYwoMGmJSjCgs9It8grcEP3kEDVl2bywIaUaxVyh+ppa2qGAEeR6pfrlFFTUNFgxOdgQQGAhVpQS9IxM7HXRsPCIAGgjTSygWODhfLgaAekeoSLfpoA)
