# é …ç›®50  ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚’å‹ã«å¯¾ã™ã‚‹é–¢æ•°ã¨è€ƒãˆã‚‹

## è¦šãˆã¦ãŠãã¹ãã“ã¨

* ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’å‹ã«å¯¾ã™ã‚‹é–¢æ•°ã¨è€ƒãˆã‚‹ã€‚
* å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä½¿ã£ã¦é–¢æ•°ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’åˆ¶ç´„ã™ã‚‹ã®ã¨åŒã˜ã‚ˆã†ã«ã€`extends`ã‚’ä½¿ã£ã¦å‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’åˆ¶ç´„ã™ã‚‹ã€‚
* ã‚³ãƒ¼ãƒ‰ã®èª­ã¿ã‚„ã™ã•ã‚’å‘ä¸Šã•ã›ã‚‹ã‚ˆã†ãªå‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã®åå‰ã‚’é¸ã³ã€TSDocã‚’æ›¸ãã€‚
* ã‚¸ã‚§ãƒãƒªãƒƒã‚¯é–¢æ•°ã¨ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¹ã‚’ã€ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã‚’æ¦‚å¿µçš„ã«å®šç¾©ã—ã€å‹æ¨è«–ã®åŠ©ã‘ã¨ãªã‚‹ã‚‚ã®ã¨è€ƒãˆã‚‹ã€‚

## ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```ts
type MyPartial<T> = {[K in keyof T]?: T[K]};
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsiAKBDATsAlogNgHgCoD4oBeKAbwG0BpKNAOygGsIQB7AMylwF0B+ALk5UuAXwDcQA)

----

```ts
interface Person {
  name: string;
  age: number;
}

type MyPartPerson = MyPartial<Person>;
//   ^? type MyPartPerson = { name?: string; age?: number; }

type PartPerson = Partial<Person>;
//   ^? type PartPerson = { name?: string; age?: number; }
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/JYOwLgpgTgZghgYwgAgArQM4HsTIN4BQyyIcAthAFzIZhSgDmA3EcnA1SQK5kBG0LAL4ECYAJ4AHFAFkxqOFDDoo2XAF5ks+YuBwANgB5lqgHwsA9OeLIAegH5k4qZrkKlmHMg14S5CHepaehBmNg4A7j4BZGFRSRRtdxVPDUTdQ2McMwJLa3tHeLQ3TPV8XwoIoMYmMP9qEB5+KBrBIA)

----

```ts
type MyPick<T, K> = {
  [P in K]: T[P]
  //    ~        Type 'K' is not assignable to type 'string | number | symbol'.
  //             å‹ 'K' ã‚’å‹ 'string | number | symbol' ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
  //        ~~~~ Type 'P' cannot be used to index type 'T'.
  //             å‹ 'P' ã¯å‹ 'T' ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã«ä½¿ç”¨ã§ãã¾ã›ã‚“ã€‚
};
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsiAKBLAxgawDwBUA0UDSAfFALxQDeAUFFANrxSIB2+AugFxSZ0tVQD0fatQB+QsZ3DQA5HikMAzlEYB7YFACG8+YgDmjdQCMANtGDKooSFCnzgAJyY6oAHyUBXALYGIdl1HkgXspGUgB0vALiUdSA0erWslCASQxxNvaOfoye3r6uAUEhUIDWDIBOSoBRDIDK+oBmDIDRDIDKDIAWDID2DIDmDICyDIB+DIDaDIDJDIBADBGC0cLDopiS1vByyOqMKmreUG7yEAAmFuZMKxAAHhbjUphhA9FRKZNQjSmHUIB2DIAlDIDPDIDjDIDDDID1DICdDIWA-vKAFK5tXT6FAAvgBuIA)

----

```ts
// @ts-expect-errorï¼ˆã“ã‚Œã‚’ã‚„ã‚‰ãªã„ã“ã¨ï¼ï¼‰
type MyPick<T, K> = { [P in K]: T[P] };
type AgeOnly = MyPick<Person, 'age'>;
//   ^? type AgeOnly = { age: number; }
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/PTAEAEBcGcFoFMAeAHeBjSCBOWD2XAIf8GUGQGIZAkhkBCGQSIZArBkBEGIwCwZBAf8Eh-gKEgE9VQBZLgAUAlmgDWAHgAqAGlABpAHygAvKADeoANqDQwgHYKAugC5QUnUdABfANyce8UAEEA5vADy+gDZdV-IVFJQXgsaFx9OQByAEN3KMV7EFAUgD0AflBuXjdPHz81TTj4M30AVwBbACNQ2xsgA)

----

```ts
type FirstNameOnly = MyPick<Person, 'firstName'>;
//   ^? type FirstNameOnly = { firstName: unknown; }
type Flip = MyPick<'age', Person>;
//   ^? type Flip = {}
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAYglgJwM7AHIEMC2EDyA7AGxCgF4oBZEABTgGMBrAHiomQHs8AaKAcgDNEKDNh4A+ANwAoAPTSo8gHoB+KKEixBaLLkLEyAbygDkW7AC4oAVzz08bAO55xUAL6S10GAThhSFanRMPOgA5hA83CzseBIycooqHrDevgYuQA)

----

```ts
type MyPick<T, K> = { [P in K & PropertyKey]: T[P & keyof T] };

type AgeOnly = MyPick<Person, 'age'>;
//   ^? type AgeOnly = { age: number; }
type FirstNameOnly = MyPick<Person, 'firstName'>;
//   ^? type FirstNameOnly = { firstName: never; }
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsiAKBLAxgawDwBUA0UDSAfFALxQDeUA2vFIgHb5QBkU8ATgPaRuh4QgBdAFxRM1ZlFT8OAM1ECoAXwDcAKFWhIUAIIBzCAHk6AGxAlYCFBngQ2AZw51cAcgCG+5wTUB6b1H8AegD8UJrQeoYmZqQU7hAidACuALYARrbKShrg0ABiiPbAAHKuyZGm5nBIaOg29o4uMgV2xaUQnj5+gSFhUPmFJWVGFTFQTQNtCRAAbhlKQA)

----

```ts
type MyPick<T extends object, K extends keyof T> = {[P in K]: T[P]};

type AgeOnly = MyPick<Person, 'age'>;
//   ^? type AgeOnly = { age: number; }
type FirstNameOnly = MyPick<Person, 'firstName'>;
//                                  ~~~~~~~~~~~
//            Type '"firstName"' does not satisfy the constraint 'keyof Person'.
//            å‹ '"firstName"' ã¯åˆ¶ç´„ 'keyof Person' ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã€‚
type Flip = MyPick<'age', Person>;
//                 ~~~~~ Type 'string' does not satisfy the constraint 'object'.
//                       å‹ 'string' ã¯åˆ¶ç´„ 'object' ã‚’æº€ãŸã—ã¦ã„ã¾ã›ã‚“ã€‚
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsiAKBLAxgawDwBUoQB7AgDsATAZygHsAjAKwmWABooBpHfIsqVCECgMyiYAfFAC8UAN4BteFESFWAXQBcQ2UoC+AbgBQu0JCgBBAOYQA8oQA2IcbAQoM8CACdSFQswDkAQ3PewnoA9MFQ4QB6APxQhtBmljZ2EpJQ-hBqhACuALZUbtpQmgbg0ABiiO7AAHK+OYm29nBIaOgu7p4+-JWkNXUQgSFh4SOjY+MT4wB+M7NzU7qhk6OYpVDeAETdVbX1G95QxBQQ5IQUwFCkvsCIpPx2wAAW0Mieva6+ChfePHyC7R5CN4AHSLYbLKCAaPV1lsen09gdAPYMgDYlQAgvutfgIoADPAdAEkMgAC7QD6DIB1BkAZgyAEQZAH4MgG0GQDJDIAgBhKRjK1kQYCajlafgCzBxhCCYIhE3mQjW3neClMByOJygZwuVxudwezygr0I70+hG+1DoDBBQuFwuhEuArilSLR6z19GA+OJ5Op9IZQA)

----

```ts
/**
 * ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ä¸€éƒ¨ã‚’ä½¿ç”¨ã—ã¦æ–°ã—ã„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã‚’ä½œã‚‹
 * ï¼ˆçµ„ã¿è¾¼ã¿ã®`Pick`å‹ã¨åŒã˜ï¼‰
 * @template T å…ƒã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹
 * @template K ä½¿ç”¨ã™ã‚‹ã‚­ãƒ¼ã€é€šå¸¸ã¯æ–‡å­—åˆ—ãƒªãƒ†ãƒ©ãƒ«å‹ã®ãƒ¦ãƒ‹ã‚ªãƒ³
 */
type MyPick<T extends object, K extends keyof T> = {
  [P in K]: T[P]
};
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/PQKhCgAIUwqhkNYZAdDIcoZD1DICYZDR6oOwZDrDIW4ZBFhkDGGQYoZtAAOUAuEwJIZB-eUApXQdQZAzBkAbTJwEQYEUNMbAOvKBohigxAEP+ARX0D+DIB74qdgAGABQCWAYwDWCzIAsGQDAqgDQZAkP+jIAAQAuAUwC2ABwA2AQ2uQAKpEDCith5ospy1tHFytIAGlIRkBNBiFAWoZAH4ZAQAZALATADj1AewZAcNNAdW1AdCVAK4ZiQEuGQGuGHEAzhkBphlhAZ4ZRYHALAE87UIBZJtVNAB4PKwAPawA7ABMAZ0gAewAjACsrNQsAGnDIAeHxyA0rJsmAM3cAPkgAXkgAbyhIAG0lSBUh8IBdAC53W6fwAF8AbiA)

----

```ts
function pick<T extends object, K extends keyof T>(
  obj: T, ...keys: K[]
): Pick<T, K> {
  const picked: Partial<Pick<T, K>> = {};
  for (const k of keys) {
    picked[k] = obj[k];
  }
  return picked as Pick<T, K>;
}

const p: Person = { name: 'Matilda', age: 5.5 };
const age = pick(p, 'age');
//    ^? const age: Pick<Person, "age">
console.log(age);  // { age: 5.5 }ãŒãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œã‚‹
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/GYVwdgxgLglg9mABABxhA1gHgCqIKYAeUeYAJgM6JwBGAVntADSIDS+RJFi6eAnnMETYAfAAoAUIip0AXEOYA6JT17k5LANoBdcQEo5ABTRZszFsMQBvSYggJyUFMbylDAQwBOsNwBtMRjBwzYQsAXisAXwBuG2A4D0RROzAHbipBFXJdKxspVAwXDXQtRHCaWiKtGKkImw88KBAPJHyeUkQ3SgCTYJja8WTU5EM8D3IEUqtEMDcAWzw5AHIAWTdYH1I3ReY3AHMFxABWBUPEaIH7Rz28SdbRZGZF68XdGIB6N6kpAD0AfltLh19oZjP5RuMwMwAETXKHCC4pOA+PAKHxwXaia6vKQfKbXOTHU4RQAyDIBbhkADQyAawZAF+KgGylQCqDIAYhkA0QxAA)

----

```ts
type P = typeof pick;
//   ^? type P = <T extends object, K extends keyof T>(
//         obj: T, ...keys: K[]
//      ) => Pick<T, K>
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAClC8VSQPYDMpgJYGMDWA3AFAD0JUFAegPxLjRyIA8AKlBAB7AQB2AJgGcoKAEYArCDmAAaKAGl2XXoKh4IIdFBYA+ABSlyFI0dFiAXFtkA6G2pACLcgNoBdA8YoBKBNti48rLJy2kA)

----

```ts
const age = pick<Person, 'age'>(p, 'age');
//    ^? const age: Pick<Person, "age">
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYewdgzgLgBAhgcwKYwLwwA4EtgGsA8ACkgE4TgA0MA5IktQHwAUGVty1AlANwBQA9PxjCYAPQD8MUJFh0AXDEI4CxMpRgAiOhoZA)

----

```ts
class Box<T> {
  value: T;
  constructor(value: T) {
    this.value = value;
  }
}

const dateBox = new Box(new Date());
//    ^? const dateBox: Box<Date>
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/MYGwhgzhAEBCD2APAPAFQHzQN4ChrQDcwQBXAUwC5pUBuPaYeAOwgBcAnE4V+dgCiKlK1AJTZ6+VgAsAlhAB0g8tAC8hYuTr4Avjl05GLVtAAmYVmQSJV0JmQDucJHzuOAIubJ8RIugHo-fHwAPQB+BmY2U08rKitkDwt0IA)

----

```ts
type MapValues<T extends object, F> = {
  [K in keyof T]: F<T[K]>;
  //              ~~~~~~~ Type 'F' is not generic.
  //                      å‹ 'F' ã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
};
```

[ğŸ’» TypeScriptãƒ—ãƒ¬ã‚¤ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰](https://www.typescriptlang.org/ja/play/?ts=5.8.2#code/C4TwDgpgBAsghmAanANgVwgZwDwBUoQAewEAdgCaZQD2ARgFYQDGwANFAGIB8UAvFAG8AUFCgBtANJQAlqSgBrCCGoAzKLgC6ALk55JGrgG4RUAPSnRlq9YB+d+zfXhoAcg4uZVUtWBQA5mQQAE7STAB0JubW0TFWgNHqUG4egPYMgB0MgOUMgLMMgFcMgMMMgPUMgOYMyYBCDIBRDIB+DIDaDIDJDIBADEIAvoZAA)
